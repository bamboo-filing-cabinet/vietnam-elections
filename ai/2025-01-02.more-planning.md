# Vietnam Elections Candidate Directory Site â€” Improved Plan

## Objectives
- Publish a static, GitHub Pages-compatible directory of official candidate information.
- Support multiple election cycles with a clear upgrade path to cross-cycle people pages.
- Minimize legal/political risk via strict sourcing, neutral presentation, and transparent change logs.

## Scope (MVP to v1)
- MVP: single-cycle directory for the 2021 15th National Assembly with search, list, and detail pages; sourced, timestamped data.
- v1: multi-cycle support, methodology/sources/disclaimer pages, QA checks in CI.
- Optional: cross-cycle people pages if identifiers are reliable.

## Principles
- Encyclopedia mode only: no endorsements, rankings, comments, or allegations.
- Every factual field has a source URL and fetched/published dates.
- Build-time data pipeline; no runtime backend.

## Architecture Summary
- Data pipeline: ingest official sources -> normalize to SQLite staging -> export JSON for site.
- Static site: Next.js App Router + static export to `out/`, deployed to GitHub Pages.
- Search: build-time index JSON per cycle; client-side filtering with folded fields.

## Current Data Inventory (data/na-15-2021)
- `congressional-units-parsed.csv`: constituency list with province/city, unit number, seat count, and districts.
- `candidates-list-vietnamese.pdf`: official candidate list (PDF, not yet extracted).
- `congressional-units.pdf`: official constituency document (PDF source for the CSV).
- `README.md`: source links and notes (pre-2025 administrative boundaries).

## Data Model (minimal, extendable)
- Tables: election_cycle, locality, constituency, person, candidate_entry, source, document.
- IDs: stable slugs/hashes; per-cycle constituency IDs to handle boundary changes.
- Constraints: candidate_entry unique; source unique by (entry_id, field, url); FKs enforced.

## JSON Exports
- Per cycle:
  - `elections/{cycle}/candidates_index.json`
  - `elections/{cycle}/candidates_detail/{entry_id}.json`
  - `elections/{cycle}/localities.json`
  - `elections/{cycle}/constituencies.json`
  - `elections/{cycle}/timeline.json`
  - `elections/{cycle}/documents.json`
  - `elections/{cycle}/changelog.json`
- Optional cross-cycle:
  - `people/people_index.json`
  - `people/people_detail/{person_id}.json`

## Milestones
1) Repo skeleton and deployment
   - Next.js static export configured for GitHub Pages.
   - BasePath/assetPrefix verified in production.

2) Single-cycle MVP (2021 15th National Assembly)
   - Build from data in `data/na-15-2021`.
   - Use `congressional-units-parsed.csv` to populate localities/constituencies.
   - Add candidate data after extraction from `candidates-list-vietnamese.pdf`.
   - Candidates list + detail pages.
   - Client-side search using folded fields.
   - Sources displayed per field and last-updated timestamp.

3) SQLite staging pipeline
   - Ingest raw sources into staging.db.
   - Export JSON shapes from SQL.
   - QA checks added to CI.

4) Multi-cycle support
   - Add a second cycle dataset.
   - Cycle index page and per-cycle navigation.

5) Hardening and policy pages
   - Methodology, sources registry, changelog, disclaimer, privacy, terms.
   - Accessibility + performance review.

6) Optional people pages
   - Only if stable person_id can be derived from official identifiers.

## QA / Integrity Checks (CI)
- No candidate entry without a source.
- No broken foreign keys.
- Duplicate name_folded within cycle+locality flagged.
- Missing key fields reported (bio, constituency, locality).

## Risks and Mitigations
- Source changes or removals: keep raw snapshots with fetch timestamps.
- Legal/political risk: strict sourcing, neutral copy, no user submissions.
- Data ambiguity: keep changes logged; add correction intake with private form.

## Open Decisions
- Person identity strategy: which identifiers are stable enough.
- Search scaling: locality chunking or build-time FlexSearch index.
- Localization: initial language set and fallback strategy.

## Immediate Next Steps
- Map `congressional-units-parsed.csv` to locality/constituency tables and JSON exports.
- Define citation policy for the 2021 15th National Assembly dataset (URLs + fetched/published dates).
- Decide candidate extraction format and target fields from `candidates-list-vietnamese.pdf`.
- Implement base Next.js export config and stub pages.
